<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
	<style>
		body {
			padding: 100px;
			width: 1000px;
			margin: auto;
			text-align: left;
			font-weight: 300;
			font-family: 'Open Sans', sans-serif;
			color: #121212;
			background-color: #f6ead7;
			cursor: url(https://rsha256.github.io/cloth-clear-32.png), auto;
		}

		.bounding-box {
			border: 2px solid #ccc;
			padding: 20px;
			border-radius: 10px;
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.6);
			/* Updated box-shadow */
			max-width: 1000px;
			margin: 0 auto;
			background-color: #ffffff;
		}

		h1,
		h2,
		h3,
		h4 {
			font-family: 'Source Sans Pro', sans-serif;
		}

		.center {
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100vh;
			/* This centers the image vertically */
		}

		table {
			width: 100%;

		}

		th,
		td {
			border: 3px solid black;
			padding: 10px;
			text-align: center;
			vertical-align: middle;
		}

		th {
			background-color: #f2f2f2;
		}

		hr {
			border: 0;
			height: 1px;
			background-color: black;
			margin: 20px 0;
			/* Adjust margin as needed */
		}

		img {
			max-width: 100%;
			height: auto;
			display: block;
			margin: 0 auto;
		}

		figcaption {
			margin-top: 5px;
			/* Add some margin above captions */
		}

		.highlighter-rouge {
			color: #b00505;
			background-color: rgb(247, 222, 222);
			border-radius: 4px;
			padding: 3px;
		}
	</style>
	<title>CS 184 Mesh Edit</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Sans+Pro" rel="stylesheet">

	<script>
		MathJax = {
			tex: {
				inlineMath: [['$', '$'], ['\\(', '\\)']]
			}
		};
	</script>
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
	</script>
</head>

<body>

	<h1 align="middle">CS 184: Computer Graphics and Imaging, Spring 2024</h1>
	<h1 align="middle"><a href="https://cal-cs184-student.github.io/hw-webpages-sp24-ianhdong/hw4/index.html">Homework
			4: Cloth Simulation</a></h1>
	<h2 align="middle">Ian Dong</h2>


	<div class="bounding-box">
		<h2 align="middle">Overview</h2>
		<!-- <p> -->
		In this homework, I explored the physics behind cloth simulation by implementing a mass-spring system to
		represent the cloth. I used Verlet integration to compute each of the <code
			class="highlighter-rouge">PointMass</code> objects' new position to simulate the cloth's movement. Then, I
		implemented a way to detect cloth collision with outside objects as well as resolving self-collisions. Finally,
		I added wind forces to the cloth to simulate the cloth's movement in the wind.
		<!-- </p> -->
		<br>
	</div>

	<br><br>

	<h2 align="middle">Section I: Masses and Springs</h2>
	<div class="bounding-box">
		<h3>
			<!-- <b> -->
			Explain how you implemented the mass-spring system to represent the cloth.
			<!-- </b> -->
		</h3>
		<p>
			Because the cloth's springs needed to be in row major order, I first looped through the number of height
			points as this represented each individual row before iterating through each of the width points to create
			the required springs. I calculated the <code class="highlighter-rouge">x</code> position in order to fit
			<code class="highlighter-rouge">num_width_points</code> within the cloth's width. Depending on whether the
			cloth was horizontal or vertical, I made sure to set <code class="highlighter-rouge">y</code> to either be 1
			or the correctly spaced out position fit the necessary number of width points and set <code
				class="highlighter-rouge">z</code> to either the correctly spaced out position fit the necessary number
			of width points or the random offset. Before inserting the <code class="highlighter-rouge">PointMass</code>,
			I checked to see the object should be pinned or not. Finally, I iterated through the two-dimensional grid
			positions and converted them into the <code class="highlighter-rouge">PointMass</code> one-dimensional
			vector position and checked for boundary conditions before creating the <code
				class="highlighter-rouge">STRUCTURAL</code>, <code class="highlighter-rouge">SHEARING</code>, and <code
				class="highlighter-rouge">BENDING</code> springs as listed in the homework description.
		</p>
	</div>
	<br>
	<div class="bounding-box">
		<h3>
			<!-- <b> -->
			Take some screenshots of <code class="highlighter-rouge">scene/pinned2.json</code> from a viewing angle
			where you can clearly see the cloth wireframe to show the structure of your point masses and springs.
			<!-- </b> -->
		</h3>
		Here are some screenshots of the cloth wireframe from <code class="highlighter-rouge">scene/pinned2.json</code>:

		<div align="middle">
			<table style="width:100%">
				<tr align="center">
					<td>
						<img src="./Images/Task1/sp24-clothsim-task1-grid1.png" align="middle" width="400px" />
						<figcaption><code class="highlighter-rouge">pinned2.json</code> close up view</figcaption>
					</td>
					<td>
						<img src="./Images/Task1/sp24-clothsim-task1-grid2.png" align="middle" width="400px" />
						<figcaption><code class="highlighter-rouge">pinned2.json</code> above view</figcaption>
					</td>
				</tr>
			</table>
		</div>
	</div>
	<br>
	<div class="bounding-box">
		<h3>
			Show us what the wireframe looks like (1) without any shearing constraints, (2) with only shearing
			constraints, and (3) with all constraints.
		</h3>
		<div align="middle">
			<table style="width:100%">
				<tr align="center">
					<td>
						<img src="./Images/Task1/sp24-clothsim-task1-no-shearing.png" align="middle" />
						<figcaption><code class="highlighter-rouge">pinned2.json</code> no shearing constraints
						</figcaption>
					</td>
					<td>
						<img src="./Images/Task1/sp24-clothsim-task1-only-shearing.png" align="middle" />
						<figcaption><code class="highlighter-rouge">pinned2.json</code> only shearing constraints
						</figcaption>
					</td>
					<td>
						<img src="./Images/Task1/sp24-clothsim-task1-all.png" align="middle" />
						<figcaption><code class="highlighter-rouge">pinned2.json</code> all constraints</figcaption>
					</td>
				</tr>
			</table>
		</div>
	</div>
	<hr>
	<br>
	<h2 align="middle">Section II: Simulation via Numerical Integration</h2>
	<div class="bounding-box">
		<h3>
			Show us a screenshot of your shaded cloth from scene/pinned4.json in its final resting state! If you choose
			to use different parameters than the default ones, please list them.
		</h3>
		Here are the screenshots of the shaded cloth from <code class="highlighter-rouge">scene/pinned4.json</code> in
		its final resting state for both the wireframe and shaded versions:
		<div align="middle">
			<table style="width:100%">
				<tr align="center">
					<td>
						<img src="./Images/Task2/sp24-clothsim-pinned4-wireframe.png" align="middle" />
						<figcaption><code class="highlighter-rouge">pinned4.json</code> wireframe
						</figcaption>
					</td>
					<td>
						<img src="./Images/Task2/sp24-clothsim-pinned4-normals.png" align="middle" />
						<figcaption><code class="highlighter-rouge">pinned4.json</code> normals
						</figcaption>
					</td>
				</tr>
			</table>
		</div>
	</div>
	<hr>
	<br>
	<h2 align="middle">Section III: Handling Collisions with Other Objects</h2>
	<div class="bounding-box">
		<h3>
			<!-- <b> -->
			Explain how you handled collisions with the sphere and the plane.
			<!-- </b> -->
		</h3>
		<p>
			In this portion of the homework, I implemented a way to detect cloth collision with outside objects as well.
			To handle collisions with a sphere, I modified <code class="highlighter-rouge">Sphere::collide</code> and
			calculated the distance between the sphere's center and the given point mass to see whether it had already
			intersected within the sphere. If it had, I calculated the penetration depth and moved the point mass out of
			the sphere along the trajectory had it not collided, lying on the sphere's surface tangent. To handle
			collisions with a plane, I modified <code class="highlighter-rouge">Plane::collide</code> and calculated to
			see whether the two positions at the time steps were at opposite side of the plane If it was, I calculated
			the penetration depth and moved the point mass out of the plane along the trajectory had it not collided,
			lying on the plane's surface tangent. Finally, for both, we applied the friction and scaled down the
			correction vector.
		</p>
	</div>
	<br>
	<div class="bounding-box">
		<h3>
			Show us screenshots of your shaded cloth from scene/sphere.json in its final resting state on the sphere
			using the default <code class="highlighter-rouge">ks</code> = 5000 as well as with 500 and 50000. Describe
			the differences in the results.
		</h3>
		Here are the screenshots of the shaded cloth from <code class="highlighter-rouge">scene/sphere.json</code> with
		different <code class="highlighter-rouge">ks</code> values in its final resting state on the sphere:

		<div align="middle">
			<table style="width:100%">
				<tr align="center">
					<td>
						<img src="./Images/Task3/sp24-clothsim-sphere-ks-500.png" align="middle" />
						<figcaption><code class="highlighter-rouge">sphere.json</code> with <code
								class="highlighter-rouge">ks</code> = 500
						</figcaption>
					</td>
					<td>
						<img src="./Images/Task3/sp24-clothsim-sphere-ks-5000.png" align="middle" />
						<figcaption><code class="highlighter-rouge">sphere.json</code> with <code
								class="highlighter-rouge">ks</code> = 5000
						</figcaption>
					</td>
					<td>
						<img src="./Images/Task3/sp24-clothsim-sphere-ks-50000.png" align="middle" />
						<figcaption><code class="highlighter-rouge">sphere.json</code> with <code
								class="highlighter-rouge">ks</code> = 50000
						</figcaption>
					</td>
				</tr>
			</table>
		</div>
		<br>
		<code class="highlighter-rouge">ks</code> represents the stiffness of the spring. As the value of <code
			class="highlighter-rouge">ks</code> increases, the cloth becomes more rigid and less likely to fully rest on
		top of the sphere. As shown above, the leftmost image depicts the cloth almost fully resting on top of the
		sphere and because the springs' corrective forces are weak more points on the sphere fall due to gravity.
		However, the rightmost image depicts a more dramatic scene where the cloth is much more rigid and less likely to
		fully rest on top of the sphere as the strong spring forces work to oppose gravity.
	</div>
	<br>
	<div class="bounding-box">
		<h3>
			Show us a screenshot of your shaded cloth lying peacefully at rest on the plane. If you haven't by now, feel
			free to express your colorful creativity with the cloth! (You will need to complete the shaders portion
			first to show custom colors.)
		</h3>
		<p>
			Here is a screenshot of the shaded cloth lying peacefully at rest on the plane:

		<div align="middle">
			<table style="width:100%">
				<tr align="center">
					<td>
						<img src="./Images/Task3/sp24-clothsim-plane-collision-at-rest.png" align="middle" />
						<figcaption> Cloth at rest on the plane
						</figcaption>
					</td>
				</tr>
			</table>
		</div>
		</p>
	</div>
	<hr>
	<br>
	<h2 align="middle">Section IV: Handling Self-Collisions</h2>
	<div class="bounding-box">
		<h3>
			Show us at least 3 screenshots that document how your cloth falls and folds on itself, starting with an
			early, initial self-collision and ending with the cloth at a more restful state (even if it is still
			slightly bouncy on the ground).
		</h3>
		<p>
			Here are the screenshots that document how the cloth falls and collides with itself.
		</p>
		<div align="middle">
			<table style="width:100%">
				<tr align="center">
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-1.png" align="middle" />
						<figcaption>Cloth dropping</figcaption>
					</td>
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-2.png" align="middle" />
						<figcaption>Initial self-collisions</figcaption>
					</td>
				</tr>
				<tr align="center">
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-3.png" align="middle" />
						<figcaption>More self-collisions</figcaption>
					</td>
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-4.png" align="middle" />
						<figcaption>Additional self-collisions</figcaption>
					</td>
				</tr>
				<tr align="center">
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-5.png" align="middle" />
						<figcaption>Falling onto ground</figcaption>
					</td>
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-6.png" align="middle" />
						<figcaption>Restful state</figcaption>
					</td>
				</tr>
			</table>
		</div>
	</div>
	<br>
	<div class="bounding-box">
		<h3>
			Vary the <code class="highlighter-rouge">density</code> as well as <code class="highlighter-rouge">ks</code>
			and describe with words and screenshots how they affect the behavior of the cloth as it falls on itself.
		</h3>
		<p>
			Here are the screenshots that document how the cloth falls and collides with itself with two different <code
				class="highlighter-rouge">densities</code>.
		</p>

		<div align="middle">
			<table style="width:100%">
				<tr align="center">
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-density-1-1.png" align="middle" />
						<figcaption>Self-collision 1 for cloth with <code class="highlighter-rouge">density</code> = 1
						</figcaption>
					</td>
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-density-1-2.png" align="middle" />
						<figcaption>Self-collision 2 for cloth with <code class="highlighter-rouge">density</code> = 1
						</figcaption>
					</td>
				</tr>
				<tr align="center">
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-density-1-3.png" align="middle" />
						<figcaption>Self-collision 3 for cloth with <code class="highlighter-rouge">density</code> = 1
						</figcaption>
					</td>
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-density-1-4.png" align="middle" />
						<figcaption>Self-collision 4 for cloth with <code class="highlighter-rouge">density</code> = 1
						</figcaption>
					</td>
				</tr>
			</table>
		</div>
		<br>
		<div align="middle">
			<table style="width:100%">
				<tr align="center">
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-density-100-1.png" align="middle" />
						<figcaption>Self-collision 1 for cloth with <code class="highlighter-rouge">density</code> = 100
						</figcaption>
					</td>
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-density-100-2.png" align="middle" />
						<figcaption>Self-collision 2 for cloth with <code class="highlighter-rouge">density</code> = 100
						</figcaption>
					</td>
				</tr>
				<tr align="center">
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-density-100-3.png" align="middle" />
						<figcaption>Self-collision 3 for cloth with <code class="highlighter-rouge">density</code> = 100
						</figcaption>
					</td>
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-density-100-4.png" align="middle" />
						<figcaption>Self-collision 4 for cloth with <code class="highlighter-rouge">density</code> = 100
						</figcaption>
					</td>
				</tr>
			</table>
		</div>
		<br>
		When the density was low, there were a lot fewer and larger wrinkles that had formed over the cloth. As I
		increased the density, the cloth folded into itself more often and the wrinkles became much smaller in size and
		the cloth was going to collide with itself more often since it was denser.
		<br>
		<p>
			Here are the screenshots that document how the cloth falls and collides with itself with two different <code
				class="highlighter-rouge">ks</code> values.
		</p>
		<div align="middle">
			<table style="width:100%">
				<tr align="center">
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-ks-1000-1.png" align="middle" />
						<figcaption>Self-collision 1 for cloth with <code class="highlighter-rouge">ks</code> = 1000
						</figcaption>
					</td>
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-ks-1000-2.png" align="middle" />
						<figcaption>Self-collision 2 for cloth with <code class="highlighter-rouge">ks</code> = 1000
						</figcaption>
					</td>
				</tr>
				<tr align="center">
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-ks-1000-3.png" align="middle" />
						<figcaption>Self-collision 3 for cloth with <code class="highlighter-rouge">ks</code> = 1000
						</figcaption>
					</td>
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-ks-1000-4.png" align="middle" />
						<figcaption>Self-collision 4 for cloth with <code class="highlighter-rouge">ks</code> = 1000
						</figcaption>
					</td>
				</tr>
			</table>
		</div>
		<br>
		<div align="middle">
			<table style="width:100%">
				<tr align="center">
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-ks-100000-1.png" align="middle" />
						<figcaption>Self-collision 1 for cloth with <code class="highlighter-rouge">ks</code> = 100000
						</figcaption>
					</td>
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-ks-100000-2.png" align="middle" />
						<figcaption>Self-collision 2 for cloth with <code class="highlighter-rouge">ks</code> = 100000
						</figcaption>
					</td>
				</tr>
				<tr align="center">
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-ks-100000-3.png" align="middle" />
						<figcaption>Self-collision 3 for cloth with <code class="highlighter-rouge">ks</code> = 100000
						</figcaption>
					</td>
					<td>
						<img src="./Images/Task4/sp24-clothsim-self-collision-ks-100000-4.png" align="middle" />
						<figcaption>Self-collision 4 for cloth with <code class="highlighter-rouge">ks</code> = 100000
						</figcaption>
					</td>
				</tr>
			</table>
		</div>
	</div>
</body>

</html>