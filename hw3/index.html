<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    body {
      padding: 100px;
      width: 1000px;
      margin: auto;
      text-align: left;
      font-weight: 300;
      font-family: 'Open Sans', sans-serif;
      color: #121212;
      background-color: #f6ead7;
    }

    .bounding-box {
      border: 2px solid #ccc;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.6);
      /* Updated box-shadow */
      max-width: 1000px;
      margin: 0 auto;
      background-color: #ffffff;
    }

    h1,
    h2,
    h3,
    h4 {
      font-family: 'Source Sans Pro', sans-serif;
    }

    .center {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      /* This centers the image vertically */
    }

    table {
      width: 100%;

    }

    th,
    td {
      border: 3px solid black;
      padding: 10px;
      text-align: center;
      vertical-align: middle;
    }

    th {
      background-color: #f2f2f2;
    }

    hr {
      border: 0;
      height: 1px;
      background-color: black;
      margin: 20px 0;
      /* Adjust margin as needed */
    }

    img {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 0 auto;
    }

    figcaption {
      margin-top: 5px;
      /* Add some margin above captions */
    }

    .highlighter-rouge {
      color: #b00505;
      background-color: rgb(247, 222, 222);
      border-radius: 4px;
      padding: 3px;
    }
  </style>
  <title>CS 184 Mesh Edit</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Sans+Pro" rel="stylesheet">

  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>

</head>


<body>

  <h1 align="middle">CS 184: Computer Graphics and Imaging, Spring 2024</h1>
  <h1 align="middle"><a href="https://cal-cs184-student.github.io/hw-webpages-sp24-ianhdong/hw3/index.html">Homework
      3: PathTracer</a></h1>
  <h2 align="middle">Ian Dong</h2>

  <br><br>



  <div class="bounding-box">

    <h2 align="middle">Overview</h2>
    In this homework, I implemented a path tracing renderer. First, I worked on generating camera rays from image space
    to sensor in camera space and their intersection with triangles and spheres. Then, I built a bounding volume
    hierarchy to accelerate ray intersection tests and speed up the path tracers rendering. Afterwards, I explored
    direct illumination to simulate light sources and render images with realistic shadowing. Then, I implemented global
    illumination to simulate indirect lighting and reflections using diffuse BSDF. Finally, I implemented adaptive
    sampling to reduce noise
    in the rendered images.
    <br><br>
    <div align="center">
      <table>
        <tr>
          <td align="middle">
            <img src="./Images/bunny.png" width="480px" />
            <figcaption align="middle">My bunny is the bounciest bunny</figcaption>
        </tr>
      </table>
    </div>
  </div>

  <br><br>

  <h2 align="middle">Section I: Ray Generation and Scene Intersection (20 Points)</h2>
  <!-- Walk through the ray generation and primitive intersection parts of the rendering pipeline.
Explain the triangle intersection algorithm you implemented in your own words.
Show images with normal shading for a few small .dae files. -->

  <div class="bounding-box">
    <h3>
      <!-- <b> -->
      Walk through the ray generation and primitive intersection parts of the rendering pipeline.
      <!-- </b> -->
    </h3>
    <p>
      For the ray generation portion of the rendering pipeline, I first made sure to find the boundaries of the
      camera space by calculating \(\text{tan}(\frac{\text{hFov}}{2})\) and \(\text{tan}(\frac{\text{vFov}}{2})\) since
      the bottom left corner is defined as (\(-\text{tan}(\frac{\text{hFov}}{2})\), \(\text{tan}(\frac{\text{vFov}}{2})
      -1\)) and the top right corner is defined as (\(\text{tan}(\frac{\text{hFov}}{2})\),
      \(\text{tan}(\frac{\text{vFov}}{2}), -1\)). Then, I used the instance variables <code
        class="highlighter-rouge">hFov</code> and <code class="highlighter-rouge">vFov</code> which are in degrees to
      calculate the height and width length before using linear interpolation to find the camera image coordinates.
      Afterwards, I used <code class="highlighter-rouge">this->c2w</code> to convert my camera image coordinates into
      world space coordinates and also normalized the direction vector. Finally, I constructed the ray with this vector
      and defined the <code class="highlighter-rouge">min_t</code> and <code class="highlighter-rouge">max_t</code>.
    </p>
    <p>
      For the primitive intersection portion of the rendering pipeline, I generated <code
        class="highlighter-rouge">num_samples</code> using <code
        class="highlighter-rouge">this->gridSampler->get_sample()</code>. I made sure to normalize the coordinates
      before calling on the previously implemented method to generate the ray. Finally, I called <code
        class="highlighter-rouge">this->est_radiance_global_illumination()</code> to get the sample radiance and
      averaged
      the radiance to update the pixel in the buffer.
    </p>
  </div>
  <br>

  <div class="bounding-box">
    <h3>
      Explain the triangle intersection algorithm you implemented in your own words.
    </h3>
    <p>
      For the ray-triangle intersection, I implemented Moeller-Trumbore algorithm.
    </p>
  </div>
  <br>

  <div class="bounding-box">
    <h3>
      Show images with normal shading for a few small .dae files.
    </h3>
    <!-- Example of including multiple figures -->
    Here are some screenshots of the .dae files rendered with normal shading:
    <br><br>
    <div align="middle">
      <table>
        <tr align="center">
          <td>
            <img src="./Images/Task1/sp24-raytracer-task1-empty.png" align="middle" width="400px" />
            <figcaption><code>CBempty.dae</code></figcaption>
          </td>
          <td>
            <img src="./Images/Task1/sp24-raytracer-task1-spheres.png" align="middle" width="400px" />
            <figcaption><code>CBspheres.dae</code></figcaption>
          </td>
        </tr>
        <tr align="center">
          <td>
            <img src="./Images/Task1/sp24-raytracer-task1-coil.png" align="middle" width="400px" />
            <figcaption><code>CBcoil.dae</code></figcaption>
          </td>
          <td>
            <img src="./Images/Task1/sp24-raytracer-task1-gems.png" align="middle" width="400px" />
            <figcaption><code>CBgems.dae</code></figcaption>
          </td>
        </tr>
      </table>
    </div>
  </div>

  <hr>
  <br><br>


  <h2 align="middle">Section II: Bounding Volume Hierarchy (20 Points)</h2>
  <!-- Walk through your BVH construction algorithm. Explain the heuristic you chose for picking the splitting point.
Show images with normal shading for a few large .dae files that you can only render with BVH acceleration.
Compare rendering times on a few scenes with moderately complex geometries with and without BVH acceleration. Present your results in a one-paragraph analysis. -->

  <h3>
    Walk through your BVH construction algorithm. Explain the heuristic you chose for picking the splitting point.
  </h3>
  <p>
    YOUR RESPONSE GOES HERE
  </p>

  <h3>
    Show images with normal shading for a few large .dae files that you can only render with BVH acceleration.
  </h3>
  <!-- Example of including multiple figures -->
  <div align="middle">
    <table style="width:100%">
      <tr align="center">
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>example1.dae</figcaption>
        </td>
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>example2.dae</figcaption>
        </td>
      </tr>
      <tr align="center">
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>example3.dae</figcaption>
        </td>
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>example4.dae</figcaption>
        </td>
      </tr>
    </table>
  </div>
  <br>

  <h3>
    Compare rendering times on a few scenes with moderately complex geometries with and without BVH acceleration.
    Present your results in a one-paragraph analysis.
  </h3>
  <p>
    YOUR RESPONSE GOES HERE
  </p>
  <br>

  <h2 align="middle">Section III: Direct Illumination (20 Points)</h2>
  <!-- Walk through both implementations of the direct lighting function.
Show some images rendered with both implementations of the direct lighting function.
Focus on one particular scene with at least one area light and compare the noise levels in soft shadows when rendering with 1, 4, 16, and 64 light rays (the -l flag) and with 1 sample per pixel (the -s flag) using light sampling, not uniform hemisphere sampling.
Compare the results between uniform hemisphere sampling and lighting sampling in a one-paragraph analysis. -->

  <h3>
    Walk through both implementations of the direct lighting function.
  </h3>
  <p>
    YOUR RESPONSE GOES HERE
  </p>

  <h3>
    Show some images rendered with both implementations of the direct lighting function.
  </h3>
  <!-- Example of including multiple figures -->
  <div align="middle">
    <table style="width:100%">
      <!-- Header -->
      <tr align="center">
        <th>
          <b>Uniform Hemisphere Sampling</b>
        </th>
        <th>
          <b>Light Sampling</b>
        </th>
      </tr>
      <br>
      <tr align="center">
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>example1.dae</figcaption>
        </td>
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>example1.dae</figcaption>
        </td>
      </tr>
      <br>
      <tr align="center">
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>example2.dae</figcaption>
        </td>
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>example2.dae</figcaption>
        </td>
      </tr>
      <br>
    </table>
  </div>
  <br>

  <h3>
    Focus on one particular scene with at least one area light and compare the noise levels in <b>soft shadows</b>
    when rendering with 1, 4, 16, and 64 light rays (the -l flag) and with 1 sample per pixel (the -s flag) using
    light sampling, <b>not</b> uniform hemisphere sampling.
  </h3>
  <!-- Example of including multiple figures -->
  <div align="middle">
    <table style="width:100%">
      <tr align="center">
        <td>
          <img src="images/your_file.png" align="middle" width="200px" />
          <figcaption>1 Light Ray (example1.dae)</figcaption>
        </td>
        <td>
          <img src="images/your_file.png" align="middle" width="200px" />
          <figcaption>4 Light Rays (example1.dae)</figcaption>
        </td>
      </tr>
      <tr align="center">
        <td>
          <img src="images/your_file.png" align="middle" width="200px" />
          <figcaption>16 Light Rays (example1.dae)</figcaption>
        </td>
        <td>
          <img src="images/your_file.png" align="middle" width="200px" />
          <figcaption>64 Light Rays (example1.dae)</figcaption>
        </td>
      </tr>
    </table>
  </div>
  <p>
    YOUR EXPLANATION GOES HERE
  </p>
  <br>

  <h3>
    Compare the results between uniform hemisphere sampling and lighting sampling in a one-paragraph analysis.
  </h3>
  <p>
    YOUR RESPONSE GOES HERE
  </p>
  <br>


  <h2 align="middle">Section IV: Global Illumination (20 Points)</h2>
  <!-- Walk through your implementation of the indirect lighting function.
Show some images rendered with global (direct and indirect) illumination. Use 1024 samples per pixel.
Pick one scene and compare rendered views first with only direct illumination, then only indirect illumination. Use 1024 samples per pixel. (You will have to edit PathTracer::at_least_one_bounce_radiance(...) in your code to generate these views.)
For <code>CBbunny.dae<code>, compare rendered views with max_ray_depth set to 0, 1, 2, 3, and 100 (the -m flag). Use 1024 samples per pixel.
Pick one scene and compare rendered views with various sample-per-pixel rates, including at least 1, 2, 4, 8, 16, 64, and 1024. Use 4 light rays.
You will probably want to use the instructional machines for the above renders in order to not burn up your own computer for hours. -->

  <h3>
    Walk through your implementation of the indirect lighting function.
  </h3>
  <p>
    YOUR RESPONSE GOES HERE
  </p>
  <br>

  <h3>
    Show some images rendered with global (direct and indirect) illumination. Use 1024 samples per pixel.
  </h3>
  <!-- Example of including multiple figures -->
  <div align="middle">
    <table style="width:100%">
      <tr align="center">
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>example1.dae</figcaption>
        </td>
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>example2.dae</figcaption>
        </td>
      </tr>
    </table>
  </div>
  <br>

  <h3>
    Pick one scene and compare rendered views first with only direct illumination, then only indirect illumination.
    Use 1024 samples per pixel. (You will have to edit PathTracer::at_least_one_bounce_radiance(...) in your code to
    generate these views.)
  </h3>
  <!-- Example of including multiple figures -->
  <div align="middle">
    <table style="width:100%">
      <tr align="center">
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>Only direct illumination (example1.dae)</figcaption>
        </td>
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>Only indirect illumination (example1.dae)</figcaption>
        </td>
      </tr>
    </table>
  </div>
  <br>
  <p>
    YOUR EXPLANATION GOES HERE
  </p>
  <br>
  <div class="bounding-box">
    <h3>
      For <code>CBbunny.dae<code>, render the mth bounce of light with max_ray_depth set to 0, 1, 2, 3, 4, and 5 (the -m flag), and
      isAccumBounces=false. Explain in your writeup what you see for the 2nd and 3rd bounce of light, and how it
      contributes to the quality of the rendered image compared to rasterization. Use 1024 samples per pixel.
    </h3>
    <!-- Example of including multiple figures -->
    <div align="middle">
      <table style="width:100%">
        <tr align="center">
          <td>
            <img src="./Images/Task4/sp24-raytracer-task4-bunny-false-0.png" align="middle" width="400px" />
            <figcaption>max_ray_depth = 0 (<code>CBbunny.dae<code>)</figcaption>
          </td>
          <td>
            <img src="./Images/Task4/sp24-raytracer-task4-bunny-false-1.png" align="middle" width="400px" />
            <figcaption>max_ray_depth = 1 (<code>CBbunny.dae<code>)</figcaption>
          </td>
        </tr>
        <tr align="center">
          <td>
            <img src="images/your_file.png" align="middle" width="400px" />
            <figcaption>max_ray_depth = 2 (<code>CBbunny.dae<code>)</figcaption>
          </td>
          <td>
            <img src="images/your_file.png" align="middle" width="400px" />
            <figcaption>max_ray_depth = 3 (<code>CBbunny.dae<code>)</figcaption>
          </td>
        </tr>
        <tr align="center">
          <td>
            <img src="images/your_file.png" align="middle" width="400px" />
            <figcaption>max_ray_depth = 4 (<code>CBbunny.dae<code>)</figcaption>
          </td>
          <td>
            <img src="images/your_file.png" align="middle" width="400px" />
            <figcaption>max_ray_depth = 5 (<code>CBbunny.dae<code>)</figcaption>
          </td>
        </tr>
      </table>
    </div>
    <br>
    <p>
      YOUR EXPLANATION GOES HERE
    </p>
  </div>
  <br>


  <div class="bounding-box">
    <h3>
      For <code>CBbunny.dae<code>, compare rendered views with max_ray_depth set to 0, 1, 2, 3, and 100 (the -m flag). Use 1024
      samples per pixel.
    </h3>
    <!-- Example of including multiple figures -->
    <div align="middle">
      <table style="width:100%">
        <tr align="center">
          <td>
            <img src="images/your_file.png" align="middle" width="400px" />
            <figcaption>max_ray_depth = 0 (<code>CBbunny.dae<code>)</figcaption>
          </td>
          <td>
            <img src="images/your_file.png" align="middle" width="400px" />
            <figcaption>max_ray_depth = 1 (<code>CBbunny.dae<code>)</figcaption>
          </td>
        </tr>
        <tr align="center">
          <td>
            <img src="images/your_file.png" align="middle" width="400px" />
            <figcaption>max_ray_depth = 2 (<code>CBbunny.dae<code>)</figcaption>
          </td>
          <td>
            <img src="images/your_file.png" align="middle" width="400px" />
            <figcaption>max_ray_depth = 3 (<code>CBbunny.dae<code>)</figcaption>
          </td>
        </tr>
        <tr align="center">
          <td>
            <img src="images/your_file.png" align="middle" width="400px" />
            <figcaption>max_ray_depth = 100 (<code>CBbunny.dae<code>)</figcaption>
          </td>
        </tr>
      </table>
    </div>
    <br>
    <p>
      YOUR EXPLANATION GOES HERE
    </p>
    <br>
  </div>

  <h3>
    Pick one scene and compare rendered views with various sample-per-pixel rates, including at least 1, 2, 4, 8,
    16, 64, and 1024. Use 4 light rays.
  </h3>
  <!-- Example of including multiple figures -->
  <div align="middle">
    <table style="width:100%">
      <tr align="center">
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>1 sample per pixel (example1.dae)</figcaption>
        </td>
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>2 samples per pixel (example1.dae)</figcaption>
        </td>
      </tr>
      <tr align="center">
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>4 samples per pixel (example1.dae)</figcaption>
        </td>
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>8 samples per pixel (example1.dae)</figcaption>
        </td>
      </tr>
      <tr align="center">
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>16 samples per pixel (example1.dae)</figcaption>
        </td>
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>64 samples per pixel (example1.dae)</figcaption>
        </td>
      </tr>
      <tr align="center">
        <td>
          <img src="images/your_file.png" align="middle" width="400px" />
          <figcaption>1024 samples per pixel (example1.dae)</figcaption>
        </td>
      </tr>
    </table>
  </div>
  <br>
  <p>
    YOUR EXPLANATION GOES HERE
  </p>
  <br>


  <h2 align="middle">Section V: Adaptive Sampling (20 Points)</h2>

  <div class="bounding-box">
    <h3>
      Explain adaptive sampling. Walk through your implementation of the adaptive sampling.
    </h3>
    <p>
      YOUR RESPONSE GOES HERE
    </p>
  </div>
  <br>

  <div class="bounding-box">
    <h3>
      Pick two scenes and render them with at least 2048 samples per pixel. Show a good sampling rate image with
      clearly visible differences in sampling rate over various regions and pixels. Include both your sample rate
      image, which shows your how your adaptive sampling changes depending on which part of the image you are
      rendering, and your noise-free rendered result. Use 1 sample per light and at least 5 for max ray depth.
    </h3>
    Here are the rendered and their sample rate images through adaptive sampling:
    <br>
    <!-- Example of including multiple figures -->
    <div align="middle">
      <table style="width:100%">
        <tr align="center">
          <td>
            <img src="./Images/Task5/sp24-raytracer-task5-walle-rendered.png" align="middle" width="400px" />
            <figcaption>Rendered image <code>(wall-e.dae)</code></figcaption>
      </td>
      <td>
        <img src="./Images/Task5/sp24-raytracer-task5-walle-sample-rate.png" align="middle" width="400px" />
        <figcaption>Sample rate image <code>(wall-e.dae)</code></figcaption>
      </td>
      </tr>
      <tr align="center">
        <td>
          <img src="./Images/Task5/sp24-raytracer-task5-bench-rendered.png" align="middle" width="400px" />
          <figcaption>Rendered image <code>(bench.dae)</code></figcaption>
        </td>
        <td>
          <img src="./Images/Task5/sp24-raytracer-task5-bench-sample-rate.png" align="middle" width="400px" />
          <figcaption>Sample rate image <code>(bench.dae)</code></figcaption>
        </td>
      </tr>
      <tr align="center">
        <td>
          <img src="./Images/Task5/sp24-raytracer-task5-banana-rendered.png" align="middle" width="400px" />
          <figcaption>Rendered image <code>(banana.dae)</code></figcaption>
        </td>
        <td>
          <img src="./Images/Task5/sp24-raytracer-task5-banana-sample-rate.png" align="middle" width="400px" />
          <figcaption>Sample rate image <code>(banana.dae)</code></figcaption>
        </td>
      </tr>
      </table>
  </div>
  </div>
  <br>


</body>

</html>